(this.webpackJsonpkotipelit=this.webpackJsonpkotipelit||[]).push([[0],{13:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));var n=function(t){e&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),0}}).call(this,a(77))},190:function(e,t,a){e.exports=a(260)},256:function(e,t){},260:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o,l,u=a(0),s=a.n(u),E=a(18),m=a.n(E),d=a(14),p=a(57),f=a(156),g=a(12),v=a.n(g),S=a(19),O=a(8);!function(e){e.SANAKIERTO="sanakierto"}(n||(n={})),function(e){e.RUNNING="Running",e.WAITING="Waiting for players",e.UPCOMING="Upcoming",e.FINISHED="Finished"}(r||(r={})),function(e){e.SET_ACTIVE_GAME="SET_ACTIVE_GAME",e.SET_GAMES="SET_GAMES",e.INIT_GAMES_REQUEST="INIT_GAMES_REQUEST",e.INIT_GAMES_SUCCESS="INIT_GAMES_SUCCESS",e.INIT_GAMES_FAILURE="INIT_GAMES_FAILURE",e.ADD_GAME_REQUEST="ADD_GAME_REQUEST",e.ADD_GAME_SUCCESS="ADD_GAME_SUCCESS",e.ADD_GAME_FAILURE="ADD_GAME_FAILURE",e.DELETE_GAME_REQUEST="DELETE_GAME_REQUEST",e.DELETE_GAME_SUCCESS="DELETE_GAME_SUCCESS",e.DELETE_GAME_FAILURE="DELETE_GAME_FAILURE",e.LAUNCH_GAME="LAUNCH_GAME",e.UPDATE_ACTIVE_GAME="UPDATE_ACTIVE_GAME",e.LOGIN_REQUEST="LOGIN_REQUEST",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILURE="LOGIN_FAILURE",e.LOGOUT="LOGOUT",e.SET_JITSI_TOKEN="SET_JITSI_TOKEN",e.SET_JITSI_ROOM="SET_JITSI_ROOM",e.SET_SOCKET="SET_SOCKET",e.SET_DISPLAYNAME="SET_DISPLAYNAME",e.INIT_CHANNELS_REQUEST="INIT_CHANNELS_REQUEST",e.INIT_CHANNELS_SUCCESS="INIT_CHANNELS_SUCCESS",e.INIT_CHANNELS_FAILURE="INIT_CHANNELS_FAILURE",e.SET_ERROR="SET_ERROR",e.CLEAR_ERROR="CLEAR_ERROR"}(c||(c={})),function(e){e.JOIN_GAME="join game",e.JOIN_SUCCESS="join success",e.JOIN_FAILURE="join failure",e.GAME_READY="game ready",e.GAME_STARTING="game starting",e.GAME_UPDATED="game updated",e.GAME_ENDED="game ended"}(i||(i={})),function(e){e.JITSI_READY="jitsi ready",e.CREATE_ROOM="create room",e.START_GAME="start game",e.UPDATE_GAME="update game",e.END_GAME="end game",e.CREATE_SUCCESS="create success",e.CREATE_FAILURE="create failure",e.START_SUCCESS="start success",e.START_FAILURE="start failure",e.UPDATE_SUCCESS="update success",e.UPDATE_FAILURE="update failure",e.END_SUCCESS="end success",e.END_FAILURE="end failure"}(o||(o={})),function(e){e.AUTH_REQUEST="authenticate",e.AUTHENTICATED="authenticated",e.UNAUTHORIZED="unauthorized",e.CONNECT="connect",e.PLAYER_JOINED="player joined"}(l||(l={}));var A=a(39),T=a.n(A),b=null,_=function(){var e=Object(S.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t,password:a},e.next=3,T.a.post("/api/login",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(S.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h={login:_,setToken:function(e){b=e},getAuthHeader:function(){if(!b)throw new Error("K\xe4ytt\xe4j\xe4n token puuttuu");return"Bearer ".concat(b)},getAll:I,getToken:function(){return b}},N={getAll:function(){var e=Object(S.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h.getAuthHeader()}},e.next=3,T.a.get("/api/games",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNew:function(){var e=Object(S.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h.getAuthHeader()}},e.next=3,T.a.post("/api/games",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteGame:function(){var e=Object(S.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h.getAuthHeader()}},e.next=3,T.a.delete("".concat("/api/games","/").concat(t),a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j={allGames:[],activeGame:null,loading:!1},y=function(e){switch(e.type){case n.SANAKIERTO:return Object(O.a)(Object(O.a)({},e),{},{status:r.WAITING,info:{turn:"TODO",round:1}});default:throw new Error("Something went wrong, expected a selectable game, got ".concat(e.type))}},C=function(e){return{type:c.INIT_GAMES_SUCCESS,payload:e}},R=function(e){return{type:c.SET_ACTIVE_GAME,payload:e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.SET_GAMES:return Object(O.a)(Object(O.a)({},e),{},{allGames:t.payload});case c.INIT_GAMES_REQUEST:return Object(O.a)(Object(O.a)({},e),{},{loading:!0});case c.INIT_GAMES_SUCCESS:return Object(O.a)(Object(O.a)({},e),{},{allGames:t.payload,loading:!1});case c.INIT_GAMES_FAILURE:return Object(O.a)(Object(O.a)({},e),{},{loading:!1});case c.ADD_GAME_REQUEST:return Object(O.a)(Object(O.a)({},e),{},{loading:!0});case c.ADD_GAME_SUCCESS:return Object(O.a)(Object(O.a)({},e),{},{allGames:e.allGames.concat(t.payload),loading:!1});case c.ADD_GAME_FAILURE:return Object(O.a)(Object(O.a)({},e),{},{loading:!1});case c.DELETE_GAME_REQUEST:return Object(O.a)(Object(O.a)({},e),{},{loading:!0});case c.DELETE_GAME_SUCCESS:return Object(O.a)(Object(O.a)({},e),{},{allGames:e.allGames.filter((function(e){return e.id!==t.payload})),loading:!1});case c.DELETE_GAME_FAILURE:return Object(O.a)(Object(O.a)({},e),{},{loading:!1});case c.SET_ACTIVE_GAME:return Object(O.a)(Object(O.a)({},e),{},{activeGame:t.payload});case"LAUNCH_GAME":var a=e.allGames.find((function(e){return e.id===t.payload}));if(!a)throw new Error("Game not found");var n=y(a);return Object(O.a)(Object(O.a)({},e),{},{activeGame:n,allGames:e.allGames.map((function(e){return e.id===t.payload?Object(O.a)(Object(O.a)({},e),{},{status:r.WAITING}):e}))});case"UPDATE_ACTIVE_GAME":return Object(O.a)(Object(O.a)({},e),{},{activeGame:t.payload});default:return e}},U={loggedIn:!1,socket:null,jitsiRoom:null,displayName:null,loggingIn:!1},k=function(e){return{type:c.LOGIN_SUCCESS,payload:e}},G=function(e){return{type:c.SET_JITSI_ROOM,payload:e}},L=function(e){return{type:c.SET_SOCKET,payload:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.LOGIN_REQUEST:return Object(O.a)(Object(O.a)({},e),{},{loggingIn:!0});case c.LOGIN_SUCCESS:return Object(O.a)(Object(O.a)({},t.payload),{},{loggedIn:!0,jitsiToken:null,socket:null,jitsiRoom:null,loggingIn:!1});case c.LOGIN_FAILURE:case c.LOGOUT:return{loggedIn:!1,socket:null,jitsiRoom:null,displayName:null,loggingIn:!1};case c.SET_JITSI_TOKEN:return Object(O.a)(Object(O.a)({},e),{},{jitsiToken:t.payload});case c.SET_JITSI_ROOM:return Object(O.a)(Object(O.a)({},e),{},{jitsiRoom:t.payload});case c.SET_SOCKET:return Object(O.a)(Object(O.a)({},e),{},{socket:t.payload});case c.SET_DISPLAYNAME:return Object(O.a)(Object(O.a)({},e),{},{displayName:t.payload});default:return e}},M={allChannels:[],loading:!1},x=function(e){return{type:c.INIT_CHANNELS_SUCCESS,payload:e}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.INIT_CHANNELS_REQUEST:return Object(O.a)(Object(O.a)({},e),{},{loading:!0});case c.INIT_CHANNELS_SUCCESS:return{allChannels:t.payload,loading:!1};case c.INIT_CHANNELS_FAILURE:return Object(O.a)(Object(O.a)({},e),{},{loading:!1});default:return e}},F=function(e){return{type:c.SET_ERROR,payload:e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.SET_ERROR:return t.payload;case c.CLEAR_ERROR:return null;default:return e}},B=Object(p.combineReducers)({games:w,user:D,channels:P,alert:H}),K=a(157),J=Object(p.createStore)(B,Object(K.composeWithDevTools)(Object(p.applyMiddleware)(f.a))),z=a(20),Q=a(31),W=a(319),V=a(317),Y=a(309),X=a(310),Z=a(320),q=a(302),$=a(324),ee=a(24),te=a(305),ae=a(307),ne=a(308),re=Object(q.a)((function(e){return Object($.a)({container:{padding:e.spacing(2),textAlign:"center"},formField:{marginTop:e.spacing(2)}})})),ce=function(){var e=re(),t=Object(d.c)(),a=s.a.useState(""),n=Object(ee.a)(a,2),r=n[0],i=n[1],o=s.a.useState(""),l=Object(ee.a)(o,2),u=l[0],E=l[1],m=Object(d.d)((function(e){return e.user}),d.b);return m.loggedIn?s.a.createElement(z.a,{to:"/".concat(m.username)}):s.a.createElement("div",{className:e.container},s.a.createElement("div",{className:e.formField},s.a.createElement(te.a,{label:"K\xe4ytt\xe4j\xe4tunnus",variant:"outlined",value:r,onChange:function(e){var t=e.target;return i(t.value)}})),s.a.createElement("div",{className:e.formField},s.a.createElement(te.a,{label:"Salasana",variant:"outlined",type:"password",value:u,onChange:function(e){var t=e.target;return E(t.value)}})),s.a.createElement(ae.a,{className:e.formField,variant:"extended",onClick:function(){t(function(e,t){return function(){var a=Object(S.a)(v.a.mark((function a(n){var r,i;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:c.LOGIN_REQUEST}),a.prev=1,a.next=4,h.login(e,t);case 4:r=a.sent,h.setToken(r.token),i=Object(O.a)({},r),window.localStorage.setItem("kotipelitUser",JSON.stringify(i)),n(k(i)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),n({type:c.LOGIN_FAILURE});case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(r,u))}},m.loggingIn?s.a.createElement(ne.a,null):"Kirjaudu"))},ie=Object(q.a)((function(e){return Object($.a)({container:{padding:e.spacing(2),textAlign:"center"},linkContainer:{marginTop:e.spacing(2)}})})),oe=function(){var e=ie();Object(d.d)((function(e){return e.channels.allChannels}),d.b);return s.a.createElement("div",{className:e.container},s.a.createElement(X.a,{variant:"h1"},"LANDING PAGE"))},le=function(e){var t=e.user,a=Object(d.c)(),n=Object(z.g)();return t.loggedIn?u.createElement(Y.a,{color:"inherit",onClick:function(){a((window.localStorage.removeItem("kotipelitUser"),{type:c.LOGOUT})),n.push("/")}},u.createElement(X.a,null,"Kirjaa ulos ".concat(t.username))):"/kirjaudu"!==n.location.pathname?u.createElement(Y.a,{color:"inherit",onClick:function(){return n.push("/kirjaudu")}},u.createElement(X.a,null,"Kirjaudu")):null},ue=a(264),se=a(318),Ee=a(161),me=a.n(Ee),de={getOne:function(){var e=Object(S.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h.getAuthHeader()}},e.next=3,T.a.get("".concat("/api/games/words","/1"),t);case 3:if(a=e.sent,Array.isArray(a.data)&&a.data.length){e.next=6;break}throw new Error("Invalid response when fetching random words");case 6:return e.abrupt("return",a.data[0]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getMany:function(){var e=Object(S.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<1)){e.next=2;break}throw new Error("Amount must be positive");case 2:return a={headers:{Authorization:h.getAuthHeader()}},e.next=5,T.a.get("".concat("/api/games/words","/").concat(t),a);case 5:if(n=e.sent,Array.isArray(n.data)&&n.data.length){e.next=8;break}throw new Error("Invalid response when fetching random words");case 8:return e.abrupt("return",n.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pe=a(28),fe=a(167),ge=a(82),ve=a(40),Se=a(312),Oe=a(313),Ae=a(314),Te=a(315),be=a(316),_e=a(266),Ie=a(311),he=a(321),Ne=a(164),je=a.n(Ne),ye=a(168),Ce=Object(q.a)((function(e){return Object($.a)({formRow:{alignItems:"center",marginRight:e.spacing(2)},marginRight:{marginRight:e.spacing(2)},gameInfo:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2)},wordCell:{minWidth:190},buttonRow:{marginTop:e.spacing(2)}})})),Re=function(e){var t=e.players,a=e.handleRefresh;return s.a.createElement(Se.a,null,s.a.createElement(Oe.a,null,s.a.createElement(Ae.a,null,s.a.createElement(Te.a,null,"Nimi"),s.a.createElement(Te.a,null,"Sana 1"),s.a.createElement(Te.a,null,"Sana 2"),s.a.createElement(Te.a,null,"Sana 3"))),s.a.createElement(be.a,null,t.map((function(e,t){return s.a.createElement(Ae.a,{key:t},s.a.createElement(Te.a,null,s.a.createElement(ve.a,{component:ye.a,name:"players.".concat(t,".name")})),e.words.map((function(t,n){return s.a.createElement(Te.a,{key:"".concat(t).concat(n),style:{minWidth:190}},s.a.createElement("span",null,t," "),s.a.createElement(_e.a,{size:"small",onClick:function(){return a(e,n)}},s.a.createElement(je.a,null)))})))}))))},we=function(e){var t=e.formikProps,a=e.handleReturn,n=Ce(),r=function(){var e=Object(S.a)(v.a.mark((function e(a,n){var r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.getOne();case 2:r=e.sent,c=t.values.players.map((function(e){if(e.id===a.id){var t=e.words;return t[n]=r,Object(O.a)(Object(O.a)({},e),{},{words:t})}return e})),t.setValues(Object(O.a)(Object(O.a)({},t.values),{},{players:c}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return s.a.createElement(ve.c,null,s.a.createElement("div",{className:n.gameInfo},s.a.createElement(Ie.a,{row:!0,className:n.formRow},s.a.createElement(X.a,{className:n.marginRight,component:"label",variant:"h6",htmlFor:"startTime"},"Alkamisaika:"),s.a.createElement(ve.a,{component:he.a,autoOk:!0,ampm:!1,format:"d. MMMM HH:mm",disablePast:!0,name:"startTime",value:t.values.startTime,onChange:function(e){return t.setFieldValue("startTime",e)}}))),s.a.createElement("div",{className:n.gameInfo},s.a.createElement(X.a,{className:n.marginRight,component:"label",variant:"h6",htmlFor:"players"},"Pelaajat:")),s.a.createElement(ve.b,{name:"players",render:function(e){return s.a.createElement(Re,{players:t.values.players,handleRefresh:r})}}),s.a.createElement("div",{className:n.buttonRow},s.a.createElement(ae.a,{variant:"extended",color:"primary",className:n.marginRight,type:"submit"},"Luo peli"),s.a.createElement(ae.a,{variant:"extended",color:"secondary",onClick:a},"Peruuta")))},Ue=Object(q.a)((function(e){return Object($.a)({marginRight:{marginRight:e.spacing(2)},marginTop:{marginTop:e.spacing(2)}})})),ke=function(){var e=Object(S.a)(v.a.mark((function e(t,a){var n,r,c,i,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,de.getMany(t*a);case 3:for(r=e.sent,c=1;c<=t;c++){for(i=[],o=0;o<a;o++)(l=r.pop())&&i.push(l);n.push({id:me.a.generate(),name:"Pelaaja ".concat(c),words:i,points:0,online:!1})}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ge=function(){var e=s.a.useState(null),t=Object(ee.a)(e,2),a=t[0],i=t[1],o=s.a.useState(null),l=Object(ee.a)(o,2),u=l[0],E=l[1];s.a.useEffect((function(){var e=function(){var e=Object(S.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(5,3);case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{e()}catch(t){console.error("TODO: handle errors")}}),[]);var m=Ue(),p=Object(d.c)(),f=Object(z.g)(),g=function(){f.goBack()};return s.a.createElement("div",null,s.a.createElement(X.a,{variant:"h4",gutterBottom:!0},"Luo uusi peli"),s.a.createElement(se.a,null),a?u?s.a.createElement(pe.a,{utils:fe.a,locale:ge.a},s.a.createElement(ve.d,{initialValues:{startTime:new Date,type:n.SANAKIERTO,players:u,status:r.UPCOMING,rounds:3,hostOnline:!1},onSubmit:function(e,t){var a;console.log("values",e,"actions",t),console.log("adding new game"),p((a=e,function(){var e=Object(S.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.ADD_GAME_REQUEST}),e.prev=1,e.next=4,N.addNew(a);case 4:n=e.sent,t((r=n,{type:c.ADD_GAME_SUCCESS,payload:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:c.ADD_GAME_FAILURE});case 11:case"end":return e.stop()}var r}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),g()}},(function(e){return s.a.createElement(we,{handleReturn:g,formikProps:e})}))):s.a.createElement("div",null,"Ladataan..."):s.a.createElement("div",{className:m.marginTop},s.a.createElement("div",null,s.a.createElement(X.a,{variant:"h6"},"Pelin tyyppi:"),s.a.createElement("div",null,s.a.createElement(ae.a,{onClick:function(){return i(n.SANAKIERTO)},variant:"extended",className:m.marginTop},"Sanakierto")),s.a.createElement("div",null,s.a.createElement(ae.a,{disabled:!0,variant:"extended",className:m.marginTop},"Toinen peli")),s.a.createElement("div",null,s.a.createElement(ae.a,{disabled:!0,variant:"extended",className:m.marginTop},"Kolmas peli")))))},Le=a(13),De=a(123),Me=a.n(De),xe=function(){return{event:i.JOIN_GAME,data:null}},Pe=function(e){var t;Object(Le.a)("recieved ".concat(o.CREATE_SUCCESS,", data:")),Object(Le.a)(e),J.dispatch(G(e.jitsiRoom)),J.dispatch(R(e.game)),J.dispatch((t=e.jitsiToken,{type:c.SET_JITSI_TOKEN,payload:t}))},Fe=function(e){Object(Le.a)("recieved ".concat(o.END_SUCCESS,":"));var t,a=J.getState().games,n=a.allGames,i=a.activeGame;if(i){var l=n.map((function(t){return t.id===e?Object(O.a)(Object(O.a)({},t),{},{status:r.FINISHED,players:i.players}):t}));J.dispatch((t=l,{type:c.SET_GAMES,payload:t})),J.dispatch(R(Object(O.a)(Object(O.a)({},i),{},{status:r.FINISHED})))}},He=function(e){Object(Le.a)("recieved ".concat(i.JOIN_SUCCESS,":")),Object(Le.a)(e),J.dispatch({type:c.CLEAR_ERROR}),J.dispatch(G(e.jitsiRoom)),J.dispatch(R(e.game))},Be=function(){Object(Le.a)("recieved ".concat(i.GAME_READY));try{var e=J.getState().user.socket;if(!e)throw new Error("No socket set for user");Ke.emit(e,xe())}catch(t){console.error(t.message)}},Ke={getTokenForSocket:function(){var e=Object(S.a)(v.a.mark((function e(t,a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/api/games/join/".concat(t,"/").concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),authenticateSocket:function(e,t,a){return e.on(l.CONNECT,function(e,t,a){return function(){e.emit(l.AUTH_REQUEST,{token:t}).on(l.AUTHENTICATED,(function(){Object(Le.a)("socketio authorized"),a(e)})).on(l.UNAUTHORIZED,(function(e){throw Object(Le.a)("socketio unauthorized"),new Error(e.message)}))}}(e,t,a)),e},attachListeners:function(e,t){e.on(i.GAME_UPDATED,(function(e){return function(e){Object(Le.a)("recieved ".concat(i.GAME_UPDATED,":")),Object(Le.a)(e),J.dispatch(R(e))}(e)})),t?(e.on(o.CREATE_SUCCESS,(function(e){return Pe(e)})),e.on(o.CREATE_FAILURE,(function(e){return function(e){return Object(Le.a)("recieved ".concat(o.CREATE_FAILURE,": ").concat(e.error))}(e)})),e.on(o.START_SUCCESS,(function(e){var t;t=e,Object(Le.a)("recieved ".concat(o.START_SUCCESS,":")),Object(Le.a)(t),J.dispatch(R(t))})),e.on(o.START_FAILURE,(function(e){return function(e){return Object(Le.a)("recieved ".concat(o.START_FAILURE,": ").concat(e.error))}(e)})),e.on(o.UPDATE_SUCCESS,(function(e){return function(e){Object(Le.a)("recieved ".concat(o.UPDATE_SUCCESS,", data:")),Object(Le.a)(e),J.dispatch(R(e))}(e)})),e.on(o.UPDATE_FAILURE,(function(e){return function(e){return Object(Le.a)("recieved ".concat(o.UPDATE_FAILURE,": ").concat(e.error))}(e)})),e.on(o.END_SUCCESS,(function(e){Fe(e)})),e.on(o.END_FAILURE,(function(e){!function(e){Object(Le.a)("recieved ".concat(o.END_FAILURE,": ").concat(e.error))}(e)}))):(e.on(i.JOIN_SUCCESS,(function(e){return He(e)})),e.on(i.JOIN_FAILURE,(function(e){return function(e){Object(Le.a)("recieved ".concat(i.JOIN_FAILURE,": ").concat(e.error)),J.dispatch(F("Host ei ole viel\xe4 k\xe4ynnist\xe4nyt peli\xe4."))}(e)})),e.on(i.GAME_READY,Be),e.on(i.GAME_STARTING,(function(e){return function(e){Object(Le.a)("recieved ".concat(i.GAME_STARTING,":")),Object(Le.a)(e),J.dispatch(R(e))}(e)})),e.on(i.GAME_ENDED,(function(){!function(){Object(Le.a)("recieved ".concat(i.GAME_ENDED,":"));var e=J.getState().games.activeGame;e&&J.dispatch(R(Object(O.a)(Object(O.a)({},e),{},{status:r.FINISHED})))}()})))},emit:function(e,t){var a=t.event,n=t.data;Object(Le.a)("Emitting ".concat(a)),n&&(Object(Le.a)("Data:"),Object(Le.a)(n)),e.emit(a,n)}},Je=function(e,t){try{var a=J.getState().user.socket;if(!a)throw new Error("Socket not set for user");Ke.emit(a,function(e,t){return{event:o.JITSI_READY,data:{gameId:e,jitsiRoom:t}}}(e,t))}catch(n){console.error(n.message)}},ze=function(e){try{var t=J.getState().user.socket;if(!t)throw new Error("Socket not set for user");Ke.emit(t,function(e){return{event:o.START_GAME,data:e}}(e))}catch(a){console.error(a.message)}},Qe=function(e){try{var t=J.getState().user.socket;if(!t)throw new Error("Socket not set for user");Ke.emit(t,function(e){return{event:o.UPDATE_GAME,data:e}}(e))}catch(a){console.error(a.message)}},We=function(e){try{var t=J.getState().user.socket;if(!t)throw new Error("Socket not set for user");Ke.emit(t,function(e){return{event:o.END_GAME,data:e}}(e))}catch(a){console.error(a.message)}},Ve=function(e){return e?function(t){Ke.attachListeners(t,!0),Ke.emit(t,function(e){return{event:o.CREATE_ROOM,data:e}}(e))}:function(e){Ke.attachListeners(e,!1),Ke.emit(e,xe())}},Ye=function(){Object(Le.a)("tearing down socket and active game");var e=J.getState().user.socket;e&&(e.disconnect(),J.dispatch(L(null))),J.dispatch(R(null))},Xe=function(){var e=Object(S.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw new Error("Pelaajan id puuttuu");case 2:return e.prev=2,e.next=5,Ke.getTokenForSocket(t,a);case 5:n=e.sent,Object(Le.a)("Setting display name to '".concat(n.displayName,"'")),J.dispatch((i=n.displayName,{type:c.SET_DISPLAYNAME,payload:i})),r=Me()(),J.dispatch(L(r)),Ke.authenticateSocket(r,n.token,Ve(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),J.dispatch(F("Peliin liittyminen ep\xe4onnistui. Tarkista osoite."));case 16:case"end":return e.stop()}var i}),e,null,[[2,13]])})));return function(t,a){return e.apply(this,arguments)}}(),Ze=a(165),qe=Object(q.a)((function(e){return Object($.a)({loader:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},btnContainer:{textAlign:"center",marginBottom:e.spacing(2)}})})),$e=function(){var e=qe();return s.a.createElement("div",{className:e.loader},s.a.createElement(X.a,null,"Ladataan videoyhteytt\xe4..."))},et=function(e){var t=e.token,a=e.roomName,n=e.displayName,r=e.loadedCallback,c=e.dev,i=s.a.useState(!c),o=Object(ee.a)(i,2),l=o[0],u=o[1],E=s.a.useState(null),m=Object(ee.a)(E,2),d=m[0],p=m[1],f=qe();s.a.useEffect((function(){return function(){return null===d||void 0===d?void 0:d.dispose()}}),[]);var g=function(e){e.on("videoConferenceLeft",(function(){return function(e){u(!1),e.dispose()}(e)})),p(e),r&&r()};if(!l)return s.a.createElement("div",{className:f.loader},s.a.createElement("div",{className:f.btnContainer},s.a.createElement(ae.a,{variant:"extended",onClick:function(){return u(!0)}},"K\xe4ynnist\xe4 video")),t&&s.a.createElement("div",{className:f.btnContainer},s.a.createElement(ae.a,{variant:"extended",onClick:r},"Trigger API loaded")));return s.a.createElement(Ze.a,{containerStyle:{width:"100%",height:"100%"},roomName:a,displayName:n||void 0,domain:"meet.kotipelit.com",jwt:t||void 0,loadingComponent:$e,onAPILoad:function(e){return g(e)},config:{subject:" "},interfaceConfig:{DEFAULT_REMOTE_DISPLAY_NAME:"Pelaaja",DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_FOCUS_INDICATOR:!0,DISABLE_JOIN_LEAVE_NOTIFICATIONS:!0,DISABLE_PRESENCE_STATUS:!0,DISABLE_RINGING:!0,DISABLE_TRANSCRIPTION_SUBTITLES:!0,DISPLAY_WELCOME_PAGE_CONTENT:!1,DISPLAY_WELCOME_PAGE_TOOLBAR_ADDITIONAL_CONTENT:!0,ENABLE_DIAL_OUT:!1,filmStripOnly:!0,GENERATE_ROOMNAMES_ON_WELCOME_PAGE:!1,HIDE_INVITE_MORE_HEADER:!0,SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,RECENT_LIST_ENABLED:!1}})},tt=Object(q.a)((function(e){return Object($.a)({startBtn:{textAlign:"center",margin:e.spacing(2)}})})),at=function(e){var t=e.game,a=e.handleStart,n=tt();return s.a.createElement("div",null,a&&s.a.createElement("div",{className:n.startBtn},s.a.createElement(ae.a,{variant:"extended",onClick:a},"Aloita peli")),s.a.createElement(Se.a,null,s.a.createElement(be.a,null,t.players.map((function(e){return s.a.createElement(Ae.a,{key:e.id},s.a.createElement(Te.a,null,e.name),s.a.createElement(Te.a,null,e.online?s.a.createElement(X.a,{variant:"caption",color:"primary"},"Paikalla"):s.a.createElement(X.a,{variant:"caption",color:"textSecondary"},"Odotetaan...")))})))))},nt=a(170),rt=a(323),ct=Object(q.a)((function(e){return Object($.a)({container:{marginTop:e.spacing(2)},noPaddingX:{paddingLeft:0,paddingRight:0},saveBtnContainer:{textAlign:"center",marginTop:e.spacing(2)},additionBox:{minWidth:50}})})),it=function(e){var t=e.players,a=e.turn,n=e.handleUpdate,r=ct(),c=s.a.useState(new Array(t.length).fill(!1)),i=Object(ee.a)(c,2),o=i[0],l=i[1],u=function(e){var n=t.length,r=o.reduce((function(e,t){return t?e+1:e}),0);switch(r){case n-1:case 0:return e===a?-50:0;case 1:return o[e]||e===a?100:0;case 2:return o[e]||e===a?30:0;case 3:return o[e]||e===a?10:0}return r};return s.a.createElement("div",{className:r.container},s.a.createElement(Se.a,null,s.a.createElement(be.a,null,s.a.createElement(Ae.a,null,s.a.createElement(Te.a,{padding:"none",align:"center"},s.a.createElement(X.a,{variant:"overline"},"Pelaaja")),s.a.createElement(Te.a,{padding:"none",align:"center"},s.a.createElement(X.a,{variant:"overline"},"Pisteet")),s.a.createElement(Te.a,{padding:"none",align:"center"},s.a.createElement(X.a,{variant:"overline"},"+ / -")),s.a.createElement(Te.a,{padding:"none",align:"center"},s.a.createElement(X.a,{variant:"overline",noWrap:!0},"Vastaus oikein"))),t.map((function(e,t){return s.a.createElement(Ae.a,{key:t},s.a.createElement(Te.a,{className:r.noPaddingX,align:"center"},s.a.createElement("span",null,e.name),e.online?null:s.a.createElement(X.a,{variant:"caption",color:"error"}," (offline)")),s.a.createElement(Te.a,{align:"center"},e.points),s.a.createElement(Te.a,{align:"center",className:"".concat(r.noPaddingX," ").concat(r.additionBox)},function(e){var t=e>0?"+".concat(e):"".concat(e),a="";return e>0&&(a="green"),e<0&&(a="red"),s.a.createElement("span",{style:{color:a}},t)}(u(t))),s.a.createElement(Te.a,{align:"center",padding:"checkbox"},t===a?s.a.createElement(X.a,{variant:"caption",color:"textSecondary"},"Kysyj\xe4"):s.a.createElement(rt.a,{value:o[t],checked:o[t],onChange:function(){var e=Object(nt.a)(o);e[t]=!e[t],l(e)}})))})))),s.a.createElement("div",{className:r.saveBtnContainer},s.a.createElement(ae.a,{variant:"extended",color:"primary",onClick:function(){var e=t.map((function(e,t){return Object(O.a)(Object(O.a)({},e),{},{points:e.points+u(t)})}));l(new Array(t.length).fill(!1)),n(e)}},"P\xe4ivit\xe4 pisteet")))},ot=function(e,t){var a=s.a.useRef();s.a.useEffect((function(){a.current=e}),[e]),s.a.useEffect((function(){if(null!==t){var e=setInterval((function(){if(!a||!a.current)throw new Error("Problem with interval hook");a.current()}),t);return function(){return clearInterval(e)}}}),[t])},lt=Object(q.a)((function(e){return Object($.a)({container:{padding:e.spacing(1)},flex:{display:"flex",alignItems:"center"},grow:{flexGrow:1}})})),ut=function(e){var t=e.game,a=lt(),n=Object(d.d)((function(e){return e.user.socket})),r=s.a.useState(!1),c=Object(ee.a)(r,2),i=c[0],o=c[1],l=s.a.useState(90),u=Object(ee.a)(l,2),E=u[0],m=u[1];if(ot((function(){m(E-1),1===E&&o(!1)}),i?1e3:null),!n)return s.a.createElement(X.a,null,"Yhdistet\xe4\xe4n...");var p=t.players,f=t.info,g=p.findIndex((function(e){return e.id===f.turn}));if(g<0)throw new Error("Something went wrong with player turns");var v=p[g];return s.a.createElement("div",{className:a.container},s.a.createElement(X.a,{variant:"h6"},"Kierros ".concat(t.info.round)),s.a.createElement("div",{className:a.flex},s.a.createElement("div",{className:a.grow},s.a.createElement(X.a,{variant:"overline",component:"div",className:a.grow},"Vuorossa:"),s.a.createElement(X.a,{component:"div",gutterBottom:!0},v.name)),s.a.createElement("div",{className:a.grow},s.a.createElement(X.a,{variant:"overline",component:"div",className:a.grow},"Sanat:"),s.a.createElement(X.a,{component:"div",gutterBottom:!0},v.words.join(" / ")))),s.a.createElement("div",null,s.a.createElement(X.a,{variant:"overline",component:"div"},"Vastausaika:"),s.a.createElement("div",{className:a.flex},s.a.createElement(X.a,{component:"div",className:a.grow},0!==E?"".concat(E," sekuntia"):s.a.createElement(X.a,{color:"textSecondary"},"Aika loppui")),s.a.createElement("div",{className:a.grow},s.a.createElement(ae.a,{variant:"extended",size:"small",color:"secondary",onClick:function(){0!==E&&o(!i)},disabled:0===E},i?"Pys\xe4yt\xe4":"K\xe4ynnist\xe4")))),s.a.createElement(it,{players:t.players,turn:t.players.indexOf(v),handleUpdate:function(e){var a,n;g===e.length-1?(a=t.info.round+1,n=e[0].id):(a=t.info.round,n=e[g+1].id);var r=Object(O.a)(Object(O.a)({},t),{},{players:e,info:{round:a,turn:n}});Qe(r),i&&o(!1),m(90)}}))},st=Object(q.a)((function(e){return Object($.a)({container:{padding:e.spacing(2),textAlign:"center"},marginTop:{marginTop:e.spacing(2)}})})),Et=function(e){var t=e.results,a=e.handleTearDown,n=st(),r=s.a.useState(t),c=Object(ee.a)(r,1)[0];return s.a.createElement("div",{className:n.container},s.a.createElement(X.a,{variant:"h4",gutterBottom:!0},"TULOKSET"),s.a.createElement(Se.a,null,s.a.createElement(be.a,null,c.map((function(e){return s.a.createElement(Ae.a,{key:e.name},s.a.createElement(Te.a,{align:"center"},e.name),s.a.createElement(Te.a,{align:"center"},"".concat(e.points," pistett\xe4")))})))),a&&s.a.createElement("div",{className:n.marginTop},s.a.createElement(ae.a,{variant:"extended",color:"secondary",onClick:a},"Lopeta peli")))},mt=Object(q.a)((function(){return Object($.a)({centered:{display:"flex",flexDirection:"column",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"}})})),dt=function(e){var t=e.msg,a=e.spinner,n=mt();return s.a.createElement("div",{className:n.centered},s.a.createElement(X.a,{gutterBottom:!0},t),a&&s.a.createElement("div",null,s.a.createElement(ne.a,null)))},pt=Object(q.a)((function(e){return Object($.a)({container:{display:"flex"},jitsiContainer:{boxSizing:"border-box",width:"65%",backgroundColor:e.palette.grey[400],height:568},hostControls:{boxSizing:"border-box",width:"35%",padding:e.spacing(2),marginLeft:e.spacing(1),height:568}})})),ft=function(e){var t=e.user,a=pt(),n=s.a.useState(null),c=Object(ee.a)(n,2),i=c[0],o=c[1],l=Object(d.d)((function(e){return e.games.activeGame}),d.b),u=Object(z.h)().gameID,E=t.jitsiToken,m=t.jitsiRoom,p=t.username,f=t.socket;s.a.useEffect((function(){Object(Le.a)("initializing socket");try{!function(e,t){if(!t)throw new Error("Pelin id puuttuu");var a=Me()();J.dispatch(L(a)),Ke.authenticateSocket(a,e.token,Ve(t))}(t,u)}catch(i){console.error(i.message),o("Jotain meni pieleen peli\xe4 k\xe4ynnistett\xe4ess\xe4: ".concat(i.message))}return Ye}),[]);return(null===l||void 0===l?void 0:l.status)===r.FINISHED?s.a.createElement(z.a,{to:"/".concat(p)}):s.a.createElement("div",{className:a.container},s.a.createElement(ue.a,{elevation:5,className:a.jitsiContainer},i?s.a.createElement(dt,{msg:i}):m?s.a.createElement(et,{token:E,roomName:m,displayName:p,loadedCallback:function(){return Je(u,m)},dev:!0}):s.a.createElement(dt,{msg:"K\xe4ynnistet\xe4\xe4n...",spinner:!0})),s.a.createElement(ue.a,{elevation:5,className:a.hostControls},function(){return i?null:f&&l?l.status===r.WAITING?s.a.createElement(at,{game:l,handleStart:function(){return ze(u)}}):l.status===r.RUNNING?l.info.round>l.rounds?s.a.createElement(Et,{results:(e=l.players,e.sort((function(e,t){return t.points-e.points}))),handleTearDown:function(){return We(u)}}):s.a.createElement(ut,{game:l}):void 0:s.a.createElement(dt,{msg:"",spinner:!0});var e}()))},gt=function(e){var t=e.players;return s.a.createElement(Se.a,null,s.a.createElement(be.a,null,s.a.createElement(Ae.a,null,s.a.createElement(Te.a,null,s.a.createElement(X.a,{variant:"overline"},"Pelaaja")),s.a.createElement(Te.a,{align:"center"},s.a.createElement(X.a,{variant:"overline"},"Pisteet"))),t.map((function(e){return s.a.createElement(Ae.a,{key:e.id},s.a.createElement(Te.a,null,e.name),s.a.createElement(Te.a,{align:"center"},e.points))}))))},vt=Object(q.a)((function(e){return Object($.a)({container:{padding:e.spacing(2)}})})),St=function(e){var t=e.game,a=vt(),n=t.players,r=t.info,c=n.findIndex((function(e){return e.id===r.turn}));if(c<0)throw new Error("Something went wrong with player turns");var i=n[c];return s.a.createElement("div",null,s.a.createElement("div",{className:a.container},s.a.createElement(X.a,{variant:"h6"},"Kierros ".concat(t.info.round)),s.a.createElement(X.a,{variant:"overline",component:"div"},"Vuorossa:"),s.a.createElement(X.a,{component:"div",gutterBottom:!0},i.name)),s.a.createElement(gt,{players:t.players}))},Ot=Object(q.a)((function(e){return Object($.a)({container:{display:"flex"},jitsiContainer:{boxSizing:"border-box",width:"65%",backgroundColor:e.palette.grey[400],height:568},sidePanel:{boxSizing:"border-box",width:"35%",padding:e.spacing(2),marginLeft:e.spacing(1),height:568}})})),At=function(e){return e.sort((function(e,t){return t.points-e.points}))},Tt=function(e){var t=e.user,a=Ot(),n=Object(z.h)(),c=n.username,i=n.playerId,o=Object(d.d)((function(e){return e.games.activeGame}),d.b),l=Object(d.d)((function(e){return e.alert}));s.a.useEffect((function(){return Object(Le.a)("initializing socket"),Xe(c,i),Ye}),[]);return s.a.createElement("div",{className:a.container},s.a.createElement(ue.a,{elevation:5,className:a.jitsiContainer},l?s.a.createElement(dt,{msg:l}):t.jitsiRoom?(null===o||void 0===o?void 0:o.status)===r.FINISHED?s.a.createElement(dt,{msg:"Kiitos osallistumisesta! Muista antaa palautetta."}):s.a.createElement(et,{token:null,roomName:t.jitsiRoom,displayName:t.displayName,loadedCallback:function(){return null},dev:!0}):s.a.createElement(dt,{msg:"Ladataan..."})),s.a.createElement(ue.a,{elevation:5,className:a.sidePanel},l?null:t.socket&&o?o.status===r.WAITING?s.a.createElement(at,{game:o}):o.status===r.FINISHED?s.a.createElement(Et,{results:At(o.players)}):o.status===r.RUNNING?o.info.round>o.rounds?s.a.createElement(Et,{results:At(o.players)}):s.a.createElement(St,{game:o}):void 0:s.a.createElement(dt,{msg:"Yhdistet\xe4\xe4n...",spinner:!0})))},bt=a(124),_t=a(171),It=a(326),ht=a(166),Nt=a.n(ht),jt=a(169),yt=Object(q.a)((function(e){return Object($.a)({container:{marginTop:e.spacing(1),padding:e.spacing(2)},infoBar:{alignItems:"center"},flex:{display:"flex",justifyContent:"space-between"},editButton:{marginLeft:e.spacing(1)},playerRow:{},inviteText:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}})})),Ct=function(e){var t=e.game,a=e.username,n=yt(),i=s.a.useState(null),o=Object(ee.a)(i,2),l=o[0],u=o[1],E=s.a.useState(null),m=Object(ee.a)(E,2),p=m[0],f=m[1],g=Object(d.c)(),O=function(e,t,a){f(function(e,t,a){return"Tervetuloa pelaamaan ".concat(Object(bt.capitalize)(e.type),"a!\n  \nSanasi ovat: ").concat(a?a.words.join(" "):"<Pelaajan sanat>","\n      \nTeht\xe4v\xe4n\xe4si on mietti\xe4 sanoille niit\xe4 kuvaavat vihjeet.\n      \nPeli alkaa ").concat(Object(jt.a)(new Date(e.startTime),"d. MMMM HH:mm",{locale:ge.a}),".\n      \nN\xe4hd\xe4\xe4n peleill\xe4 osoitteessa:\n").concat(function(e,t){return"https://www.kotipelit.com/".concat(e,"/").concat(t)}(t,a.id))}(e,t,a))};return s.a.createElement(ue.a,{elevation:2,className:n.container},s.a.createElement("div",{className:"".concat(n.infoBar," ").concat(n.flex)},s.a.createElement("div",null,s.a.createElement(X.a,null,Object(jt.a)(new Date(t.startTime),"d. MMMM HH:mm",{locale:ge.a}))),s.a.createElement("div",null,s.a.createElement(X.a,null,Object(bt.capitalize)(t.type))),s.a.createElement("div",null,s.a.createElement(X.a,null,"".concat(t.players.length," pelaajaa"))),s.a.createElement("div",null,function(){if(t.status!==r.FINISHED){var e=t.status===r.UPCOMING?"K\xe4ynnist\xe4":"Liity";return s.a.createElement(Y.a,{variant:"contained",color:"secondary",component:Q.b,to:"/".concat(a,"/pelit/").concat(t.id)},e)}}(),s.a.createElement(_e.a,{size:"small",className:n.editButton,onClick:function(e){u(e.currentTarget)}},s.a.createElement(Nt.a,null)),s.a.createElement(_t.a,{anchorEl:l,open:Boolean(l),onClose:function(){return u(null)},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},s.a.createElement(It.a,{disabled:!0},s.a.createElement(X.a,null,"Muokkaa")),s.a.createElement(It.a,{onClick:function(){var e;window.confirm("Poistetaanko peli?")&&g((e=t.id,function(){var t=Object(S.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:c.DELETE_GAME_REQUEST}),t.prev=1,t.next=4,N.deleteGame(e);case 4:a((n=e,{type:c.DELETE_GAME_SUCCESS,payload:n})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:c.DELETE_GAME_FAILURE});case 10:case"end":return t.stop()}var n}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()))}},s.a.createElement(X.a,{color:"secondary"},"Poista"))))),s.a.createElement("div",null,s.a.createElement(X.a,{variant:"h6",gutterBottom:!0},"Pelaajat"),t.players.map((function(e){return s.a.createElement("div",{key:e.id,className:"".concat(n.flex," ").concat(n.playerRow)},s.a.createElement(X.a,{component:"div"},e.name),s.a.createElement(X.a,{component:"div"},t.status!==r.UPCOMING&&"".concat(e.points," pistett\xe4")),s.a.createElement(X.a,{component:"div"},e.words.join(" / ")),s.a.createElement("div",null,s.a.createElement(Y.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return O(t,a,e)}},"N\xe4yt\xe4 kutsuteksti")))}))),p&&s.a.createElement("div",{className:n.inviteText},s.a.createElement(X.a,{variant:"h6",gutterBottom:!0},"Kutsuteksti"),s.a.createElement(X.a,{style:{whiteSpace:"pre"}},p)))},Rt=Object(q.a)((function(e){return Object($.a)({marginTop:{marginTop:e.spacing(2)}})})),wt=function(e){var t=e.user,a=Rt(),n=Object(d.d)((function(e){return e.games.allGames})),c=function(e,a){var r=n.filter((function(e){return e.status===a}));return r.length?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement(X.a,{variant:"overline"},e)),s.a.createElement("div",null,r.map((function(e){return s.a.createElement(Ct,{key:e.id,game:e,username:t.username})})))):null};return s.a.createElement("div",null,c("K\xe4ynniss\xe4 nyt",r.RUNNING),c("Odottaa pelaajia",r.WAITING),c("Tulevat pelit",r.UPCOMING),c("Menneet pelit",r.FINISHED),s.a.createElement("div",{className:a.marginTop},s.a.createElement(ae.a,{color:"primary",variant:"extended",component:Q.b,to:"/".concat(t.username,"/newgame")},"UUSI PELI")))},Ut=Object(q.a)((function(e){return Object($.a)({marginBottom:{marginBottom:e.spacing(2)},container:{padding:e.spacing(3)}})})),kt=function(e){var t=e.labelText,a=Ut(),n=Object(d.d)((function(e){return e.user}));return s.a.createElement(Q.a,null,s.a.createElement(ue.a,{elevation:5,className:a.container},s.a.createElement(X.a,{variant:"h3",gutterBottom:!0},t),s.a.createElement(se.a,{className:a.marginBottom}),s.a.createElement(z.d,null,s.a.createElement(z.b,{path:"/:username/newgame"},n.loggedIn&&s.a.createElement(Ge,null)),s.a.createElement(z.b,{path:"/:username/pelit/:gameID"},n.loggedIn&&s.a.createElement(ft,{user:n})),s.a.createElement(z.b,{path:"/:username/:playerId"},!n.loggedIn&&s.a.createElement(Tt,{user:n})),s.a.createElement(z.b,{path:"/"},n.loggedIn&&s.a.createElement(wt,{user:n})))))},Gt=Object(q.a)((function(e){return Object($.a)({navbar:{marginBottom:e.spacing(3)},toolbar:{display:"flex",justifyContent:"space-between"}})})),Lt=function(){var e=Gt(),t=Object(d.c)(),a=Object(d.d)((function(e){return e.user}),d.b),n=Object(d.d)((function(e){return e.channels.allChannels}),d.b);s.a.useEffect((function(){t((function(e){var t=window.localStorage.getItem("kotipelitUser");if(t){var a=JSON.parse(t);h.setToken(a.token),e({type:c.LOGIN_SUCCESS,payload:a})}})),t(function(){var e=Object(S.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.INIT_GAMES_REQUEST}),e.prev=1,e.next=4,N.getAll();case 4:a=e.sent,t(C(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:c.INIT_GAMES_FAILURE});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),t(function(){var e=Object(S.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.INIT_CHANNELS_REQUEST}),e.prev=1,e.next=4,h.getAll();case 4:a=e.sent,t(x(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:c.INIT_CHANNELS_FAILURE});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[t]);return s.a.createElement(Q.a,null,s.a.createElement(W.a,{position:"static",className:e.navbar},s.a.createElement(V.a,{className:e.toolbar},s.a.createElement(Y.a,{color:"inherit",component:Q.b,to:"/"},s.a.createElement(X.a,{variant:"h6"},"Kotipelit.com")),s.a.createElement(le,{user:a}))),s.a.createElement(Z.a,null,s.a.createElement(z.d,null,function(e){return e.map((function(e){return s.a.createElement(z.b,{key:e.username,path:"/".concat(e.username)},s.a.createElement(kt,{labelText:e.channelName}))}))}(n),s.a.createElement(z.b,{path:"/kirjaudu"},s.a.createElement(ce,null)),s.a.createElement(z.b,{path:"/"},s.a.createElement(oe,null)))))};m.a.render(s.a.createElement(d.a,{store:J},s.a.createElement(Lt,null)),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.1c63e577.chunk.js.map